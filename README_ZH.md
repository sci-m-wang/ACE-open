# OpenCE: å¼€æ”¾ä¸Šä¸‹æ–‡å·¥ç¨‹å·¥å…·ç®±

[English](https://github.com/sci-m-wang/OpenCE/blob/main/README.md) | [ä¸­æ–‡](https://github.com/sci-m-wang/OpenCE/blob/main/README_ZH.md)

### ğŸš€ é¡¹ç›®æ¼”è¿›ï¼šä» `ACE-open` åˆ° `OpenCE`

æ‚¨å¥½ï¼æ„Ÿè°¢æ‚¨çš„å…³æ³¨ã€‚æœ¬é¡¹ç›®æ­£åœ¨ç»å†ä¸€æ¬¡æ¿€åŠ¨äººå¿ƒçš„æ¼”è¿›ã€‚

æœ¬ä»“åº“æœ€åˆæ˜¯ **`ACE-open`**ï¼Œä¸€ä¸ªç¤¾åŒºé©±åŠ¨çš„ **Agentic Context Engineering (ACE)** è®ºæ–‡ (arXiv:2510.04618) çš„å¤ç°é¡¹ç›®ï¼Œå› ä¸ºåŸè®ºæ–‡å¹¶æœªå¼€æºã€‚å¾—ç›Šäºç¤¾åŒºçš„é¼åŠ›æ”¯æŒï¼Œæœ¬é¡¹ç›®è¿…é€Ÿè·å¾—äº† **300+** é¢—æ˜Ÿï¼(éå¸¸æ„Ÿè°¢\! ğŸ™)

æµ·é‡çš„ Issuesã€è®¨è®ºå’Œ Fork ä½¿å‘½é¢˜å˜å¾—æ¸…æ™°ï¼šç¤¾åŒºéœ€è¦çš„ä¸ä»…ä»…æ˜¯ä¸€ä¸ªè®ºæ–‡å¤ç°ï¼Œè€Œæ˜¯ä¸€ä¸ªæ›´å¥å£®ã€æ›´æ ‡å‡†ã€å¯æ‰©å±•çš„\*\*â€œä¸Šä¸‹æ–‡å·¥ç¨‹ (Context Engineering)â€ å·¥å…·ç®±\*\*ã€‚

å› æ­¤ï¼Œæœ¬é¡¹ç›®å†³å®šæ­£å¼å‡çº§ã€‚æˆ‘ä»¬åœ¨æ­¤å‘èµ· **OpenCE**ï¼šä¸€ä¸ªå…¨æ–°çš„ã€ç¤¾åŒºé©±åŠ¨çš„å¼€æºé¡¹ç›®ï¼Œè‡´åŠ›äºæ„å»ºä¸Šä¸‹æ–‡å·¥ç¨‹é¢†åŸŸçš„â€œç‘å£«å†›åˆ€â€ï¼Œè€Œæœ€åˆçš„ ACE å¤ç°å°†ä½œä¸ºå®ƒçš„ç¬¬ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—ã€‚

### ğŸŒŸ OpenCE çš„æ„¿æ™¯

**OpenCE (Open Context Engineering)** æ—¨åœ¨æˆä¸ºä¸€ä¸ªæ¨¡å—åŒ–ã€åŠŸèƒ½å¼ºå¤§ã€æ˜“äºä½¿ç”¨çš„å·¥å…·ç®±ï¼Œå¸®åŠ©å¼€å‘è€…å’Œç ”ç©¶è€…è½»æ¾**å®ç°**ã€**è¯„ä¼°**å’Œ**ç»„åˆ**å„ç§å‰æ²¿çš„ CE æŠ€æœ¯ã€‚

**æˆ‘ä»¬çš„æ ¸å¿ƒåŸåˆ™ï¼š**

  * **æ¨¡å—åŒ– (Modular):** è½»æ¾æ’æ‹”ã€ç»„åˆä¸åŒçš„ CE ç­–ç•¥ï¼ˆå¦‚ RAGã€å‹ç¼©ã€Promptingï¼‰ã€‚
  * **è¯„ä¼°é©±åŠ¨ (Evaluation-Driven):** æä¾›æ ‡å‡†åŒ–åŸºå‡†ï¼Œç”¨æ•°æ®è¡¡é‡ CE ç­–ç•¥çš„çœŸå®æ•ˆæœã€‚
  * **ç¤¾åŒºæ‰€æœ‰ (Community-Owned):** è¿™ä¸æ˜¯â€œæˆ‘â€çš„é¡¹ç›®ï¼Œè¿™æ˜¯â€œæˆ‘ä»¬â€çš„é¡¹ç›®ã€‚

### ğŸ—ºï¸ è·¯çº¿å›¾ (Roadmap)

  * **[v0.1 - åŸºç¡€é‡æ„]** (è¿›è¡Œä¸­)
      * [ ] å°†ç°æœ‰ ACE ä»£ç é‡æ„ä¸º OpenCE çš„ç¬¬ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—ï¼š`opence.ace`ã€‚
      * [ ] å»ºç«‹æ¸…æ™°çš„ `CONTRIBUTING.md` è´¡çŒ®æŒ‡å—ã€‚
      * [ ] è¿ç§»å¹¶è§£å†³ `ACE-open` ä»“åº“çš„é—ç•™ Issuesã€‚
  * **[v0.5 - æ ¸å¿ƒæ¨¡å—]**
      * [ ] æ·»åŠ  `opence.compression` (ä¸Šä¸‹æ–‡å‹ç¼©) ç­‰æ–°æ¨¡å—ã€‚
      * [ ] å¼•å…¥ `opence.evaluation` (ä¸€ä¸ªåŸºç¡€çš„ CE è¯„ä¼°æ¡†æ¶)ã€‚
  * **[v1.0 - ç”Ÿæ€æ‰©å±•]**
      * [ ] ä¸ LangChain / LlamaIndex ç­‰ç”Ÿæ€çš„æ·±åº¦é›†æˆã€‚
      * [ ] ... æ›´å¤šåŠŸèƒ½ï¼Œç”±ç¤¾åŒºå†³å®šï¼

### ğŸ¤ æˆ‘ä»¬æ­£åœ¨å¯»æ‰¾ä½ ï¼(Call for Contributions)

ä¸€ä¸ªäººèµ°å¾—å¿«ï¼Œä¸€ç¾¤äººèµ°å¾—è¿œã€‚ä¸ºäº†å®ç° OpenCE çš„æ„¿æ™¯ï¼Œæˆ‘ä»¬è¿«åˆ‡éœ€è¦æ‚¨çš„å¸®åŠ©ã€‚

æˆ‘ä»¬æ­£åœ¨å¯»æ‰¾ï¼š

  * **å¼€å‘è€… (Developers)**: æ„å»ºæ–°åŠŸèƒ½ã€ä¿®å¤ Bugã€‚
  * **ç ”ç©¶è€… (Researchers)**: å¸®åŠ©æˆ‘ä»¬é›†æˆæœ€æ–°çš„ CE è®ºæ–‡ã€‚
  * **æ–‡æ¡£è´¡çŒ®è€… (Doc Writers)**: å¸®åŠ©æˆ‘ä»¬æ’°å†™æ¸…æ™°æ˜“ç”¨çš„æ–‡æ¡£ã€‚

**å¦‚ä½•å¼€å§‹è´¡çŒ®ï¼Ÿ**

1.  é˜…è¯»æˆ‘ä»¬çš„ **[CONTRIBUTING.md](link-to-contributing-guide)** (å³å°†æ¨å‡º)ã€‚
2.  å¯»æ‰¾ **[Good First Issue](link-to-issues)** (é€‚åˆæ–°æ‰‹çš„ä»»åŠ¡) æ ‡ç­¾ã€‚

-----

## æ ¸å¿ƒæ¨¡å—ï¼šACE æ¡†æ¶ (æˆ‘ä»¬æ•…äº‹å¼€å§‹çš„åœ°æ–¹)

*(This module is the reproduction that started it all)*

æœ¬æ¨¡å—æ˜¯ [Agentic Context Engineering (ACE)](https://arxiv.org/abs/2510.04618) è®ºæ–‡æ–¹æ³•çš„å®ç°æ¡†æ¶ã€‚

ä»£ç è®¾è®¡éµå¾ªåŸè®ºæ–‡ï¼š

  * ä¸Šä¸‹æ–‡ (Contexts) æ˜¯ç”±â€œæ¡ç›® (bullet entries)â€æ„æˆçš„ç»“æ„åŒ–æ‰‹å†Œ (playbooks)ï¼Œæ¯ä¸ªæ¡ç›®éƒ½æœ‰â€œæœ‰ç›Š/æœ‰å®³â€è®¡æ•°å™¨ã€‚
  * ä¸‰ç§ Agent è§’è‰² (Generator, Reflector, Curator) é€šè¿‡å¢é‡â€œDeltas æ›´æ–°â€è¿›è¡Œäº¤äº’ã€‚
  * ç¦»çº¿ (Offline) å’Œåœ¨çº¿ (Online) é€‚åº”å¾ªç¯æ”¯æŒå¤šè½®è®­ç»ƒå’Œæµ‹è¯•æ—¶çš„æŒç»­å­¦ä¹ ã€‚

å…³äºè¯¥æ–¹æ³•çš„ç²¾ç‚¼æ€»ç»“ï¼Œè¯·å‚é˜… [docs/method\_outline.md](https://github.com/sci-m-wang/OpenCE/blob/main/docs/method_outline.md)ã€‚

### é¡¹ç›®ç»“æ„

```
ace/         # v0.1 å°†é‡å‘½åä¸º opence/ace: æ ¸å¿ƒåº“æ¨¡å—
tests/       # è½»é‡çº§å›å½’æµ‹è¯•
docs/        # å…³äºè®ºæ–‡æ–¹æ³•çš„æŠ€æœ¯ç¬”è®°
scripts/     # (æ–°å¢) ç¤ºä¾‹è¿è¡Œè„šæœ¬
```

### å¿«é€Ÿå¼€å§‹

ç¡®ä¿æ‚¨å®‰è£…äº† Python 3.9+ (å¼€å‘ç¯å¢ƒä½¿ç”¨ 3.12)ã€‚

(å¯é€‰) åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒã€‚

è¿è¡Œå•å…ƒæµ‹è¯•ï¼š

```bash
python -m unittest discover -s tests
```

### ä½¿ç”¨ç¤ºä¾‹

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ `DummyLLMClient` (è™šæ‹Ÿ LLM) çš„æœ€å°ç¦»çº¿é€‚åº”å¾ªç¯ï¼š

```python
import json
from ace import (
    Playbook, DummyLLMClient, Generator, Reflector, Curator,
    OfflineAdapter, Sample, TaskEnvironment, EnvironmentResult
)

# å®šä¹‰ä¸€ä¸ªç©å…·ä»»åŠ¡ç¯å¢ƒ
class ToyEnv(TaskEnvironment):
    def evaluate(self, sample, generator_output):
        gt = sample.ground_truth or ""
        pred = generator_output.final_answer
        feedback = "correct" if pred == gt else f"expected {gt} but got {pred}"
        return EnvironmentResult(feedback=feedback, ground_truth=gt)

client = DummyLLMClient()

# ä¸º3ä¸ª Agent è§’è‰²é¢„è®¾å¥½è¿”å›çš„ JSON å“åº”
client.queue(json.dumps({"reasoning": "...", "bullet_ids": [], "final_answer": "42"}))
client.queue(json.dumps({"reasoning": "...", "error_identification": "", "root_cause_analysis": "",
                         "correct_approach": "", "key_insight": "Remember 42.", "bullet_tags": []}))
client.queue(json.dumps({"reasoning": "...", "operations": [{"type": "ADD", "section": "defaults",
                         "content": "Answer 42 when in doubt.", "metadata": {"helpful": 1}}]}))

adapter = OfflineAdapter(
    playbook=Playbook(),
    generator=Generator(client),
    reflector=Reflector(client),
    curator=Curator(client),
)
samples = [Sample(question="Life?", ground_truth="42")]

adapter.run(samples, ToyEnv(), epochs=1)
```

### æ‰©å±•è‡³å®Œæ•´å®éªŒ

1.  **å®ç° `LLMClient` å­ç±»**ï¼šåŒ…è£…æ‚¨é€‰æ‹©çš„æ¨¡å‹ API (ä¾‹å¦‚ OpenAI, DeepSeek)ã€‚
2.  **æä¾›ä»»åŠ¡ç‰¹å®šçš„ Prompts**ï¼šå‚è§ `ace/prompts.py`ï¼Œæˆ–æ ¹æ®æ‚¨çš„é¢†åŸŸè¿›è¡Œå®šåˆ¶ã€‚
3.  **æ„å»º `TaskEnvironment` é€‚é…å™¨**ï¼šè¿è¡Œæ‚¨çš„åŸºå‡†æµ‹è¯•å·¥ä½œæµ (ä¾‹å¦‚ AppWorld ReAct agent, FiNER/Formula è¯„ä¼°)ã€‚
4.  **é…ç½®å¾ªç¯**ï¼šä½¿ç”¨ `OfflineAdapter.run` å’Œ `OnlineAdapter.run`ï¼Œå¹¶æŒ‰åŸè®ºæ–‡æ‰€è¿°é…ç½®å¤šè½® (epochs)ã€‚
5.  **æ¢ç”¨çœŸå® LLM**ï¼šä¾‹å¦‚ï¼Œä½¿ç”¨æœ¬åœ°æ¨¡å‹æƒé‡å¹¶æŒ‡å®š GPUï¼š
    ```bash
    CUDA_VISIBLE_DEVICES=2,3 python scripts/run_local_adapter.py
    ```
    (è¯·å‚é˜… `scripts/` ä¸­çš„æœ€å°é…ç½®ç¤ºä¾‹ã€‚)
